<div class="flex flex-col gap-y-4">
  <div class="flex items-center gap-3">
    <i data-lucide="message-square-lock" class="text-stone-400 size-7"></i>

    <h1 class="text-3xl font-semibold">
      Private Chats
    </h1>
  </div>

  <div class="card bg-base-100 w-full">

    <div class="p-4">
      <h2 class="text-lg font-bold">Filter:</h2>

      <form class="flex flex-wrap flex-row items-end gap-2" method="get">
        <%- include('mod/components/filter-input', {
          icon: 'message-square',
          label: 'Messsage',
          name: 'message',
          value: filters.message,
          type: 'search',
          placeholder: 'Message...'
        }); %>

        <%- include('mod/components/filter-input', {
          icon: 'calendar',
          label: 'Start Date',
          name: 'start',
          value: filters.start,
          type: 'date',
          placeholder: ''
        }); %>

        <%- include('mod/components/filter-input', {
          icon: 'calendar',
          label: 'End Date',
          name: 'end',
          value: filters.end,
          type: 'date',
          placeholder: ''
        }); %>

        <%- include('mod/components/filter-hidden-inputs', { sort: filters.sort, order: filters.order, limit }); %>
        <%- include('mod/components/filter-buttons', { link: `/mod/overview/chats/private/${user.username}` }); %>
      </form>
    </div>

    <div class="overflow-x-auto md:overflow-visible">
      <table class="table">
        <thead class="bg-white/S">
          <tr>
            <%- include('mod/components/table-header', { sort: 'world', label: 'World', filters, filtersQuery: buildQueryString(filters, ['sort', 'order']), defaultSort: 'timestamp', defaultOrder: 'desc' }) %>
            <th>Coords</th>
            <th>Message</th>
            <%- include('mod/components/table-header', { sort: 'timestamp', label: 'Date', filters, filtersQuery: buildQueryString(filters, ['sort', 'order']), defaultSort: 'timestamp', defaultOrder: 'desc' }) %>
          </tr>
        </thead>
        <tbody>
          <% messages.forEach((message) => { %>
          <tr>
            <td><%= message.world - 9 %></td>
            <td><%= toDisplayCoord(message.coord) %></td>
            <td><%= message.message %></td>
            <td>
              <div class="md:tooltip" data-tip="<%= formatTime(message.timestamp) %>">
                <%= fromNow(message.timestamp) %>
              </div>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</div>