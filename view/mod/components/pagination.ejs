<div class="flex flex-wrap justify-between items-center gap-2 p-4">
    <div class="join">
        <% if (currentPage > 1) { %>
        <a href="?<%= filtersQuery ? filtersQuery + '&' : '' %>page=<%= currentPage - 1 %>" class="join-item btn">Previous</a>
        <% } %>

        <% if (currentPage > 3) { %>
        <a href="?<%= filtersQuery ? filtersQuery + '&' : '' %>page=1" class="join-item btn">1</a>

        <% if (currentPage > 4) { %>
        <span class="join-item btn btn-disabled">...</span>
        <% } %>
        <% } %>

        <% for (var i = Math.max(1, currentPage - 2); i <= Math.min(totalPages, currentPage + 2); i++) { %>
        <a href="?<%= filtersQuery ? filtersQuery + '&' : '' %>page=<%= i %>" class="join-item btn <%= currentPage === i ? 'btn-active' : '' %>"><%= i %></a>
        <% } %>

        <% if (currentPage < totalPages - 2) { %>
        <% if (currentPage < totalPages - 3) { %>
        <span class="join-item btn btn-disabled">...</span>
        <% } %>

        <a href="?<%= filtersQuery ? filtersQuery + '&' : '' %>page=<%= totalPages %>" class="join-item btn"><%= totalPages %></a>
        <% } %>

        <% if (currentPage < totalPages) { %>
        <a href="?<%= filtersQuery ? filtersQuery + '&' : '' %>page=<%= currentPage + 1 %>" class="join-item btn">Next</a>
        <% } %>
    </div>

    <div class="flex items-center gap-2">
        <form method="GET" class="flex items-center gap-2">
            <label for="limit">Show:</label>
            <select name="limit" id="limit" class="select select-sm" onchange="this.form.submit()">
                <% [10, 25, 50, 100].forEach(function(option) { %>
                    <option value="<%= option %>" <%= option === limit ? 'selected' : '' %>><%= option %></option>
                <% }) %>
            </select>
        
            <% Object.keys(filters).forEach(function(key) { %>
                <% if (filters[key] && key !== 'limit' && key !== 'page') { %>
                    <input type="hidden" name="<%= key %>" value="<%= filters[key] %>">
                <% } %>
            <% }) %>
        </form>

        <span>Page <%= currentPage %> of <%= totalPages %></span>
    </div>

</div>
